package frc.robot.subsystems;

import edu.wpi.first.wpilibj2.command.CommandBase;
import edu.wpi.first.wpilibj2.command.SubsystemBase;
import com.revrobotics.CANSparkMax;
import com.revrobotics.CANSparkMaxLowLevel;
import com.revrobotics.SparkMaxPIDController;
import edu.wpi.first.networktables.NetworkTableEntry;
import edu.wpi.first.wpilibj.*;
import edu.wpi.first.wpilibj.DoubleSolenoid.Value;
import edu.wpi.first.wpilibj.shuffleboard.Shuffleboard;
import edu.wpi.first.wpilibj.shuffleboard.ShuffleboardTab;
import frc.Constants;

public class TiltHood extends SubsystemBase {
    CANSparkMax tiltMotor;
    SparkMaxPIDController tiltMotorController;
    int angleIndex = 2; //default to 60 degrees
    
    public static DoubleSolenoid shooterSolenoid;
    public static Solenoid reserveSolenoid;
    ShuffleboardTab tab = Shuffleboard.getTab("Tilt Hood");
    NetworkTableEntry motorRotations = tab.add("Motor rotations", 0).getEntry();

    public static Compressor compressor = new Compressor(Constants.COMPRESSOR_ID, PneumaticsModuleType.REVPH);

    public TiltHood(){
        
        tiltMotor = new CANSparkMax(tiltMotorID, CANSparkMaxLowLevel.MotorType.kBrushed);
        tiltMotorController = tiltMotor.getPIDController();
        tiltMotorController.setP(Constants.TILT_HOOD_P);
        tiltMotorController.setI(Constants.TILT_HOOD_I);
        tiltMotorController.setD(Constants.TILT_HOOD_D);

        this.setToAngle(Constants.ANGLE_POSITIONS[angleIndex]);

        shooterSolenoid = new DoubleSolenoid(PneumaticsModuleType.REVPH, shooterSolenoidID1, shooterSolenoidID2);
        reserveSolenoid = new Solenoid(PneumaticsModuleType.REVPH, reserveSolenoidID);
    }
}